/**
 * Auto-generated code - DO NOT EDIT
 *
 * Generated by protoc-gen-actrframework-kotlin plugin
 *
 * Service: FileTransferService
 * Package: file_transfer
 */
package com.example.generated

import io.actor_rtc.actr.ContextBridge
import io.actor_rtc.actr.RpcEnvelopeBridge

// Import protobuf message types
// These are generated by the protobuf gradle plugin
import file_transfer.FileTransfer.*


/**
 * Handler interface for FileTransferService
 *
 * Implement this interface to provide your business logic.
 *
 * Example:
 * ```kotlin
 * class MyFileTransferService : FileTransferServiceHandler {
 *     override suspend fun methodName(request: RequestType, ctx: ContextBridge): ResponseType {
 *         // Business logic here
 *         return ResponseType.newBuilder().build()
 *     }
 * }
 * ```
 */
interface FileTransferServiceHandler {
    /**
     * RPC method: StartTransfer
     */
    suspend fun start_transfer(request: StartTransferRequest, ctx: ContextBridge): StartTransferResponse

    /**
     * RPC method: EndTransfer
     */
    suspend fun end_transfer(request: EndTransferRequest, ctx: ContextBridge): EndTransferResponse
}

/**
 * Message dispatcher for FileTransferService
 *
 * Routes incoming messages to the appropriate handler method.
 * This is a zero-overhead dispatcher - all routing is done at compile time.
 */
object FileTransferServiceDispatcher {
    /**
     * Dispatch an RPC envelope to the appropriate handler method
     *
     * @param handler The handler implementation
     * @param ctx The context bridge
     * @param envelope The RPC envelope containing the request
     * @return The serialized response bytes
     */
    suspend fun dispatch(
        handler: FileTransferServiceHandler,
        ctx: ContextBridge,
        envelope: RpcEnvelopeBridge
    ): ByteArray {
        return when (envelope.routeKey) {
            "file_transfer.FileTransferService.StartTransfer" -> {
                val request = StartTransferRequest.parseFrom(envelope.payload)
                val response = handler.start_transfer(request, ctx)
                response.toByteArray()
            }
            "file_transfer.FileTransferService.EndTransfer" -> {
                val request = EndTransferRequest.parseFrom(envelope.payload)
                val response = handler.end_transfer(request, ctx)
                response.toByteArray()
            }
            else -> throw IllegalArgumentException("Unknown route key: ${envelope.routeKey}")
        }
    }
}
