/**
 * Auto-generated code - DO NOT EDIT
 *
 * Generated by protoc-gen-actrframework-kotlin plugin
 *
 * Service: LocalFileService
 * Package: local_file
 */
package com.example.generated

import io.actor_rtc.actr.ContextBridge
import io.actor_rtc.actr.RpcEnvelopeBridge

// Import protobuf message types
// These are generated by the protobuf gradle plugin
import local_file.File.*


/**
 * Handler interface for LocalFileService
 *
 * Implement this interface to provide your business logic.
 *
 * Example:
 * ```kotlin
 * class MyLocalFileService : LocalFileServiceHandler {
 *     override suspend fun methodName(request: RequestType, ctx: ContextBridge): ResponseType {
 *         // Business logic here
 *         return ResponseType.newBuilder().build()
 *     }
 * }
 * ```
 */
interface LocalFileServiceHandler {
    /**
     * RPC method: SendFile
     */
    suspend fun send_file(request: SendFileRequest, ctx: ContextBridge): SendFileResponse
}

/**
 * Message dispatcher for LocalFileService
 *
 * Routes incoming messages to the appropriate handler method.
 * This is a zero-overhead dispatcher - all routing is done at compile time.
 */
object LocalFileServiceDispatcher {
    /**
     * Dispatch an RPC envelope to the appropriate handler method
     *
     * @param handler The handler implementation
     * @param ctx The context bridge
     * @param envelope The RPC envelope containing the request
     * @return The serialized response bytes
     */
    suspend fun dispatch(
        handler: LocalFileServiceHandler,
        ctx: ContextBridge,
        envelope: RpcEnvelopeBridge
    ): ByteArray {
        return when (envelope.routeKey) {
            "local_file.LocalFileService.SendFile" -> {
                val request = SendFileRequest.parseFrom(envelope.payload)
                val response = handler.send_file(request, ctx)
                response.toByteArray()
            }
            else -> throw IllegalArgumentException("Unknown route key: ${envelope.routeKey}")
        }
    }
}
